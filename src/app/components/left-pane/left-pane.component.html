<div class="w-full h-full flex flex-col p-3 text-sm">
  <div class="flex justify-between items-center">
    <div
      class="truncate w-full text-stone-500 font-bold py-3"
      matTooltip="Field Groups"
    >
      Field Groups
    </div>
    <button
      class="text-nowrap text-blue-600 cursor-pointer"
      matTooltip="Create new"
      (click)="onAdd()"
    >
      Create new
    </button>
  </div>
  <div class="w-full flex-1 flex flex-col gap-2 overflow-auto">
    @for (fieldGroup of fieldGroups(); track $index; let idx = $index) {
      @if (editEnabled[idx] && idx === selectedFieldIndex()) {
        <input
          class="border border-stone-300 rounded px-3 py-2"
          type="text"
          [value]="fieldGroup.name"
          (change)="onSelect(idx); onNameChange($event, fieldGroup, idx)"
        />
      } @else {
        <div
          [ngClass]="
            idx === selectedFieldIndex()
              ? 'bg-blue-100 border border-blue-600 text-blue-600'
              : 'border border-stone-300'
          "
          class="flex justify-between items-center border border-stone-300 rounded cursor-pointer"
          (click)="onSelect(idx)"
        >
          <div class="truncate px-3 py-2" [matTooltip]="fieldGroup.name">
            {{ fieldGroup.name }}
          </div>
          <div class="flex gap-2 justify-between items-center px-3 py-2">
            <button
              class="text-blue-600 cursor-pointer"
              (click)="onEdit(idx); $event.stopPropagation()"
              matTooltip="Edit"
            >
              Edit
            </button>
            <button
              class="text-blue-600 cursor-pointer"
              (click)="onDelete(idx); $event.stopPropagation()"
              matTooltip="Delete"
            >
              Delete
            </button>
          </div>
        </div>
      }
    }
  </div>
</div>
