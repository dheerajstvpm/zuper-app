<div class="w-full h-full flex flex-col gap-2 p-3 text-sm">
  <div class="flex justify-between items-center">
    <div>Field Groups</div>
    <button class="text-blue-600 cursor-pointer" (click)="onAdd()">
      Create new
    </button>
  </div>
  @for (fieldGroup of fieldGroups(); track $index; let idx = $index) {
    @if (editEnabled[idx] && idx === selectedFieldIndex()) {
      <input
        class="border border-stone-300 rounded px-3 py-2"
        type="text"
        [value]="fieldGroup.name"
        (change)="onSelect(idx); onNameChange($event, fieldGroup, idx)"
      />
    } @else {
      <div
        [ngClass]="{
          'bg-blue-100 border border-blue-600 text-blue-600':
            idx === selectedFieldIndex(),
        }"
        class="flex justify-between items-center border border-stone-300 rounded cursor-pointer"
        (click)="onSelect(idx)"
      >
        <div class="truncate px-3 py-2" [matTooltip]="fieldGroup.name">
          {{ fieldGroup.name }}
        </div>
        <div class="flex gap-2 justify-between items-center px-3 py-2">
          <button
            class="text-blue-600 cursor-pointer"
            (click)="onEdit(idx); $event.stopPropagation()"
          >
            Edit
          </button>
          <button
            class="text-blue-600 cursor-pointer"
            (click)="onDelete(idx); $event.stopPropagation()"
          >
            Delete
          </button>
        </div>
      </div>
    }
  }
</div>
